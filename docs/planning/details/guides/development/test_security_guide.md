# üîí Test Security Guide v1.0.0

> **–ú–ï–¢–ê:** –ì–∞–π–¥ –∑ –±–µ–∑–ø–µ–∫–∏ —Ç–µ—Å—Ç—ñ–≤ –¥–ª—è Upwork AI Assistant
> **–í–ï–†–°–Ü–Ø:** 1.0.0

## –ó–º—ñ—Å—Ç
1. [–ü—Ä–∏–Ω—Ü–∏–ø–∏ –±–µ–∑–ø–µ–∫–∏ —Ç–µ—Å—Ç—ñ–≤](#–ø—Ä–∏–Ω—Ü–∏–ø–∏-–±–µ–∑–ø–µ–∫–∏-—Ç–µ—Å—Ç—ñ–≤)
2. [–¢–∏–ø–∏ —Ç–µ—Å—Ç—ñ–≤](#—Ç–∏–ø–∏-—Ç–µ—Å—Ç—ñ–≤)
3. [–ë–µ–∑–ø–µ—á–Ω—ñ –ø—Ä–∞–∫—Ç–∏–∫–∏](#–±–µ–∑–ø–µ—á–Ω—ñ-–ø—Ä–∞–∫—Ç–∏–∫–∏)
4. [–ó–∞–±–æ—Ä–æ–Ω–µ–Ω—ñ –ø—Ä–∞–∫—Ç–∏–∫–∏](#–∑–∞–±–æ—Ä–æ–Ω–µ–Ω—ñ-–ø—Ä–∞–∫—Ç–∏–∫–∏)
5. [–ú–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥ –±–µ–∑–ø–µ–∫–∏](#–º–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥-–±–µ–∑–ø–µ–∫–∏)

## –ü—Ä–∏–Ω—Ü–∏–ø–∏ –±–µ–∑–ø–µ–∫–∏ —Ç–µ—Å—Ç—ñ–≤

### **1. –ù—ñ–∫–æ–ª–∏ –Ω–µ —Ç–µ—Å—Ç—É–≤–∞—Ç–∏ –∑ —Ä–µ–∞–ª—å–Ω–∏–º–∏ –¥–∞–Ω–∏–º–∏**
- ‚ùå –†–µ–∞–ª—å–Ω—ñ API –∫–ª—é—á—ñ
- ‚ùå –†–µ–∞–ª—å–Ω—ñ —Ç–æ–∫–µ–Ω–∏
- ‚ùå –†–µ–∞–ª—å–Ω—ñ –ø–∞—Ä–æ–ª—ñ
- ‚ùå –†–µ–∞–ª—å–Ω—ñ –¥–∞–Ω—ñ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤

### **2. –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ –º–æ–∫–∏ —Ç–∞ —Å—Ç–∞–±–∏**
- ‚úÖ Mock –æ–±'—î–∫—Ç–∏ –¥–ª—è API
- ‚úÖ –°—Ç–∞–±—ñ –¥–∞–Ω—ñ –¥–ª—è —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è
- ‚úÖ –Ü–∑–æ–ª—å–æ–≤–∞–Ω—ñ —Ç–µ—Å—Ç–æ–≤—ñ —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞

### **3. –ù–µ –µ–∫—Å–ø–æ–Ω—É–≤–∞—Ç–∏ –≤–Ω—É—Ç—Ä—ñ—à–Ω—é –ª–æ–≥—ñ–∫—É**
- ‚ùå –î–µ—Ç–∞–ª—å–Ω–∞ –ª–æ–≥—ñ–∫–∞ middleware
- ‚ùå –ê–ª–≥–æ—Ä–∏—Ç–º–∏ —à–∏—Ñ—Ä—É–≤–∞–Ω–Ω—è
- ‚ùå –í–Ω—É—Ç—Ä—ñ—à–Ω—ñ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏ –¥–∞–Ω–∏—Ö

## –¢–∏–ø–∏ —Ç–µ—Å—Ç—ñ–≤

### **üü¢ –ë–ï–ó–ü–ï–ß–ù–Ü —Ç–µ—Å—Ç–∏ (–¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω—É)**

```python
# test_security_safe.py
def test_health_endpoint_accessible(self):
    """–¢–µ—Å—Ç –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—ñ health endpoint"""
    client = TestClient(app)
    response = client.get("/health")
    assert response.status_code == 200
```

**–•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏:**
- ‚úÖ –¢–µ—Å—Ç—É—é—Ç—å –ø—É–±–ª—ñ—á–Ω—ñ endpoints
- ‚úÖ –ù–µ –º—ñ—Å—Ç—è—Ç—å –≤–Ω—É—Ç—Ä—ñ—à–Ω—å–æ—ó –ª–æ–≥—ñ–∫–∏
- ‚úÖ –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—Ç—å –º–æ–∫–∏
- ‚úÖ –ë–µ–∑–ø–µ—á–Ω—ñ –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω—É

### **üü° –†–û–ó–†–û–ë–ù–ò–¶–¨–ö–Ü —Ç–µ—Å—Ç–∏ (—Ç—ñ–ª—å–∫–∏ –¥–ª—è dev)**

```python
# test_security.py
def test_rate_limiter_initialization(self):
    """–¢–µ—Å—Ç —ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—ó Rate Limiter"""
    rate_limiter = RateLimiter()
    assert rate_limiter is not None
```

**–•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏:**
- ‚ö†Ô∏è –¢–µ—Å—Ç—É—é—Ç—å –≤–Ω—É—Ç—Ä—ñ—à–Ω—é –ª–æ–≥—ñ–∫—É
- ‚ö†Ô∏è –ú–æ–∂—É—Ç—å –µ–∫—Å–ø–æ–Ω—É–≤–∞—Ç–∏ —Å—Ç—Ä—É–∫—Ç—É—Ä—É
- ‚ö†Ô∏è –¢—ñ–ª—å–∫–∏ –¥–ª—è —Ä–æ–∑—Ä–æ–±–∫–∏
- ‚ùå –ù–ï –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω—É

### **üî¥ –ö–†–ò–¢–ò–ß–ù–Ü —Ç–µ—Å—Ç–∏ (—Ç—ñ–ª—å–∫–∏ –ª–æ–∫–∞–ª—å–Ω–æ)**

```python
# test_integration_local.py
def test_real_api_integration(self):
    """–¢–µ—Å—Ç —Ä–µ–∞–ª—å–Ω–æ—ó —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—ó (–¢–Ü–õ–¨–ö–ò –ª–æ–∫–∞–ª—å–Ω–æ)"""
    # –¶–µ–π —Ñ–∞–π–ª –ù–ï –∫–æ–º—ñ—Ç–∏—Ç—å—Å—è –≤ git
    pass
```

**–•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏:**
- ‚ùå –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—Ç—å —Ä–µ–∞–ª—å–Ω—ñ API
- ‚ùå –ú—ñ—Å—Ç—è—Ç—å —Å–µ–∫—Ä–µ—Ç–∏
- ‚ùå –¢—ñ–ª—å–∫–∏ –ª–æ–∫–∞–ª—å–Ω–æ
- ‚ùå –ù–ï –≤ git

## –ë–µ–∑–ø–µ—á–Ω—ñ –ø—Ä–∞–∫—Ç–∏–∫–∏

### **1. –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –º–æ–∫—ñ–≤**

```python
# ‚úÖ –ë–ï–ó–ü–ï–ß–ù–û
@patch('services.auth_service.src.oauth.requests.post')
def test_oauth_callback(self, mock_post):
    mock_response = MagicMock()
    mock_response.status_code = 200
    mock_response.json.return_value = {
        "access_token": "test_token",  # –¢–µ—Å—Ç–æ–≤–∏–π —Ç–æ–∫–µ–Ω
        "refresh_token": "test_refresh"
    }
    mock_post.return_value = mock_response
```

### **2. –¢–µ—Å—Ç–æ–≤—ñ –¥–∞–Ω—ñ**

```python
# ‚úÖ –ë–ï–ó–ü–ï–ß–ù–û
TEST_USER_DATA = {
    "email": "test@example.com",
    "password": "test_password_123",
    "name": "Test User"
}

def test_user_creation(self):
    user = User(**TEST_USER_DATA)
    assert user.email == "test@example.com"
```

### **3. –Ü–∑–æ–ª—å–æ–≤–∞–Ω—ñ —Ç–µ—Å—Ç–∏**

```python
# ‚úÖ –ë–ï–ó–ü–ï–ß–ù–û
@pytest.fixture
def test_db():
    """–Ü–∑–æ–ª—å–æ–≤–∞–Ω–∞ —Ç–µ—Å—Ç–æ–≤–∞ –±–∞–∑–∞ –¥–∞–Ω–∏—Ö"""
    engine = create_engine('sqlite:///:memory:')
    Base.metadata.create_all(engine)
    Session = sessionmaker(bind=engine)
    session = Session()
    yield session
    session.close()
```

## –ó–∞–±–æ—Ä–æ–Ω–µ–Ω—ñ –ø—Ä–∞–∫—Ç–∏–∫–∏

### **‚ùå –ù–ï –†–û–ë–Ü–¢–¨ –¶–¨–û–ì–û:**

```python
# ‚ùå –ù–ï –ë–ï–ó–ü–ï–ß–ù–û - —Ä–µ–∞–ª—å–Ω—ñ –∫–ª—é—á—ñ
def test_openai_integration(self):
    api_key = "sk-1234567890abcdef"  # –†–µ–∞–ª—å–Ω–∏–π –∫–ª—é—á
    client = OpenAI(api_key=api_key)

# ‚ùå –ù–ï –ë–ï–ó–ü–ï–ß–ù–û - —Ä–µ–∞–ª—å–Ω—ñ —Ç–æ–∫–µ–Ω–∏
def test_jwt_verification(self):
    token = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."  # –†–µ–∞–ª—å–Ω–∏–π JWT
    payload = jwt.decode(token, secret_key)

# ‚ùå –ù–ï –ë–ï–ó–ü–ï–ß–ù–û - –µ–∫—Å–ø–æ–∑–∏—Ü—ñ—è –ª–æ–≥—ñ–∫–∏
def test_encryption_algorithm(self):
    # –†–æ–∑–∫—Ä–∏–≤–∞—î –≤–Ω—É—Ç—Ä—ñ—à–Ω—é –ª–æ–≥—ñ–∫—É —à–∏—Ñ—Ä—É–≤–∞–Ω–Ω—è
    encrypted = encrypt_data("secret", algorithm="AES-256")
```

### **‚ùå –§–ê–ô–õ–ò –Ø–ö–Ü –ù–ï –ö–û–ú–Ü–¢–Ø–¢–¨–°–Ø:**

```bash
# .gitignore
*.test.log
test_secrets.json
test_tokens.txt
.env.test
.env.local
tests/artifacts/
tests/logs/
tests/temp/
```

## –ú–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥ –±–µ–∑–ø–µ–∫–∏

### **1. –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω—ñ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏**

```python
# test_security_scan.py
def test_no_real_tokens_in_tests(self):
    """–ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —â–æ –≤ —Ç–µ—Å—Ç–∞—Ö –Ω–µ–º–∞—î —Ä–µ–∞–ª—å–Ω–∏—Ö —Ç–æ–∫–µ–Ω—ñ–≤"""
    test_files = [
        "test_security.py",
        "test_oauth.py",
        "test_security_safe.py"
    ]
    
    for file in test_files:
        if os.path.exists(f"tests/{file}"):
            with open(f"tests/{file}", 'r') as f:
                content = f.read()
                # –ü–µ—Ä–µ–≤—ñ—Ä—è—î–º–æ —â–æ –Ω–µ–º–∞—î —Ä–µ–∞–ª—å–Ω–∏—Ö –∫–ª—é—á—ñ–≤
                assert "sk-" not in content  # OpenAI keys
                assert "pk_" not in content  # Stripe keys
                assert "ghp_" not in content  # GitHub tokens
                assert "Bearer " not in content  # JWT tokens
```

### **2. Pre-commit hooks**

```yaml
# .pre-commit-config.yaml
repos:
  - repo: local
    hooks:
      - id: test-security-scan
        name: Test Security Scan
        entry: python tests/test_security_scan.py
        language: python
        pass_filenames: false
```

### **3. CI/CD –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏**

```yaml
# .github/workflows/security.yml
name: Security Tests
on: [push, pull_request]
jobs:
  security-scan:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2
      - name: Run Security Tests
        run: |
          python -m pytest tests/test_security_safe.py
          python tests/test_security_scan.py
```

## –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—ó –¥–ª—è –∞–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä—ñ–≤

### **1. –¢–µ—Å—Ç–∏ –¥–ª—è –∞–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä—ñ–≤**

```python
# admin_tests.py - —Ç—ñ–ª—å–∫–∏ –¥–ª—è –∞–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä—ñ–≤
def test_admin_dashboard_access(self):
    """–¢–µ—Å—Ç –¥–æ—Å—Ç—É–ø—É –¥–æ –∞–¥–º—ñ–Ω –ø–∞–Ω–µ–ª—ñ"""
    # –¶—ñ —Ç–µ—Å—Ç–∏ –º–æ–∂—É—Ç—å –±—É—Ç–∏ –±—ñ–ª—å—à –¥–µ—Ç–∞–ª—å–Ω–∏–º–∏
    # –∞–ª–µ –≤—Å–µ –æ–¥–Ω–æ –±–µ–∑–ø–µ—á–Ω–∏–º–∏
    pass
```

### **2. –ú–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥ —Ç–µ—Å—Ç—ñ–≤**

- üîç –†–µ–≥—É–ª—è—Ä–Ω—ñ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ —Ç–µ—Å—Ç–æ–≤–∏—Ö —Ñ–∞–π–ª—ñ–≤
- üìä –õ–æ–≥—É–≤–∞–Ω–Ω—è –≤–∏–∫–æ–Ω–∞–Ω–Ω—è —Ç–µ—Å—Ç—ñ–≤
- üö® –°–ø–æ–≤—ñ—â–µ–Ω–Ω—è –ø—Ä–æ –ø—ñ–¥–æ–∑—Ä—ñ–ª—É –∞–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å
- üìà –ú–µ—Ç—Ä–∏–∫–∏ –ø–æ–∫—Ä–∏—Ç—Ç—è —Ç–µ—Å—Ç–∞–º–∏

### **3. –û–Ω–æ–≤–ª–µ–Ω–Ω—è –±–µ–∑–ø–µ–∫–∏**

- üîÑ –†–µ–≥—É–ª—è—Ä–Ω—ñ –æ–≥–ª—è–¥–∏ –±–µ–∑–ø–µ–∫–∏ —Ç–µ—Å—Ç—ñ–≤
- üìù –î–æ–∫—É–º–µ–Ω—Ç—É–≤–∞–Ω–Ω—è –∑–º—ñ–Ω
- üéØ –¢—Ä–µ–Ω—É–≤–∞–Ω–Ω—è –∫–æ–º–∞–Ω–¥–∏
- üõ°Ô∏è –ê—É–¥–∏—Ç –±–µ–∑–ø–µ–∫–∏

## Checklist –±–µ–∑–ø–µ–∫–∏

### **–ü–µ—Ä–µ–¥ –∫–æ–º—ñ—Ç–æ–º:**
- [ ] –ù–µ–º–∞—î —Ä–µ–∞–ª—å–Ω–∏—Ö API –∫–ª—é—á—ñ–≤
- [ ] –ù–µ–º–∞—î —Ä–µ–∞–ª—å–Ω–∏—Ö —Ç–æ–∫–µ–Ω—ñ–≤
- [ ] –ù–µ–º–∞—î —Ä–µ–∞–ª—å–Ω–∏—Ö –ø–∞—Ä–æ–ª—ñ–≤
- [ ] –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—Ç—å—Å—è –º–æ–∫–∏
- [ ] –¢–µ—Å—Ç–∏ —ñ–∑–æ–ª—å–æ–≤–∞–Ω—ñ
- [ ] –ù–µ–º–∞—î –µ–∫—Å–ø–æ–∑–∏—Ü—ñ—ó –ª–æ–≥—ñ–∫–∏

### **–ü–µ—Ä–µ–¥ –¥–µ–ø–ª–æ—î–º:**
- [ ] –ó–∞–ø—É—â–µ–Ω—ñ –±–µ–∑–ø–µ—á–Ω—ñ —Ç–µ—Å—Ç–∏
- [ ] –ü–µ—Ä–µ–≤—ñ—Ä–µ–Ω–æ .gitignore
- [ ] –°–∫–∞–Ω—É–≤–∞–Ω–Ω—è –Ω–∞ —Å–µ–∫—Ä–µ—Ç–∏
- [ ] –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –ª–æ–≥—ñ–≤
- [ ] –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è –≤ staging

### **–†–µ–≥—É–ª—è—Ä–Ω–æ:**
- [ ] –û–≥–ª—è–¥ —Ç–µ—Å—Ç–æ–≤–∏—Ö —Ñ–∞–π–ª—ñ–≤
- [ ] –û–Ω–æ–≤–ª–µ–Ω–Ω—è –±–µ–∑–ø–µ–∫–∏
- [ ] –¢—Ä–µ–Ω—É–≤–∞–Ω–Ω—è –∫–æ–º–∞–Ω–¥–∏
- [ ] –ê—É–¥–∏—Ç –±–µ–∑–ø–µ–∫–∏

---

**–í–µ—Ä—Å—ñ—è**: 1.0.0  
**–û—Å—Ç–∞–Ω–Ω—î –æ–Ω–æ–≤–ª–µ–Ω–Ω—è**: 2024-07-29  
**–ê–≤—Ç–æ—Ä**: Security Team 