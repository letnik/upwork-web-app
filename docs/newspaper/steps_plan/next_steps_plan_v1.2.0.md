# –ü–ª–∞–Ω –Ω–∞—Å—Ç—É–ø–Ω–∏—Ö –∫—Ä–æ–∫—ñ–≤ v1.2.0 - 2024-12-19

> **–ü—ñ—Å–ª—è –æ–Ω–æ–≤–ª–µ–Ω–Ω—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—ó –ø—ñ–¥ OAuth 2.0 "Sign in with Upwork"**

---

## üéØ **–ü–æ—Ç–æ—á–Ω–∏–π —Å—Ç–∞—Ç—É—Å**

### ‚úÖ **–ó–∞–≤–µ—Ä—à–µ–Ω–æ:**
- **Frontend**: 100% –±–∞–∑–æ–≤–æ–≥–æ —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—É
- **Backend –∞—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞**: API Gateway + Auth Service
- **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è**: –û–Ω–æ–≤–ª–µ–Ω–∞ –ø—ñ–¥ OAuth 2.0 "Sign in with Upwork"
- **UI/UX**: –°—É—á–∞—Å–Ω–∏–π –¥–∏–∑–∞–π–Ω –∑ –Ω–∞–≤—ñ–≥–∞—Ü—ñ—î—é

### üöß **–í –ø—Ä–æ—Ü–µ—Å—ñ:**
- **OAuth —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è**: –ü–æ—Ç—Ä–µ–±—É—î Upwork Developer Account
- **–ë–∞–∑–∞ –¥–∞–Ω–∏—Ö**: –ü–æ—Ç—Ä–µ–±—É—î –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è

---

## üöÄ **–ü—Ä—ñ–æ—Ä–∏—Ç–µ—Ç–Ω—ñ –∑–∞–¥–∞—á—ñ**

### **1. Upwork Developer Account Setup (–ö–†–ò–¢–ò–ß–ù–û)**

#### **–ö—Ä–æ–∫ 1: –°—Ç–≤–æ—Ä–µ–Ω–Ω—è Upwork Developer Account**
- **–¢–µ—Ä–º—ñ–Ω**: 1-2 –¥–Ω—ñ
- **–ü—Ä—ñ–æ—Ä–∏—Ç–µ—Ç**: –ö–†–ò–¢–ò–ß–ù–û
- **–ó–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ**: –ù–µ–º–∞—î

**–ó–∞–≤–¥–∞–Ω–Ω—è:**
- [ ] –ó–∞—Ä–µ—î—Å—Ç—Ä—É–≤–∞—Ç–∏—Å—è –Ω–∞ [Upwork Developer Portal](https://developers.upwork.com/)
- [ ] –°—Ç–≤–æ—Ä–∏—Ç–∏ –Ω–æ–≤—É OAuth application
- [ ] –ù–∞–ª–∞—à—Ç—É–≤–∞—Ç–∏ Redirect URI: `http://localhost:8000/auth/upwork/callback`
- [ ] –û—Ç—Ä–∏–º–∞—Ç–∏ Client ID —Ç–∞ Client Secret
- [ ] –ù–∞–ª–∞—à—Ç—É–≤–∞—Ç–∏ Scopes: `jobs:read jobs:write freelancers:read clients:read messages:read messages:write`

#### **–ö—Ä–æ–∫ 2: –û–Ω–æ–≤–ª–µ–Ω–Ω—è .env —Ñ–∞–π–ª—É**
- **–¢–µ—Ä–º—ñ–Ω**: 30 —Ö–≤–∏–ª–∏–Ω
- **–ü—Ä—ñ–æ—Ä–∏—Ç–µ—Ç**: –ö–†–ò–¢–ò–ß–ù–û

**–ó–∞–≤–¥–∞–Ω–Ω—è:**
- [ ] –î–æ–¥–∞—Ç–∏ Upwork credentials –≤ `.env`:
  ```bash
  UPWORK_CLIENT_ID=your_client_id_here
  UPWORK_CLIENT_SECRET=your_client_secret_here
  UPWORK_CALLBACK_URL=http://localhost:8000/auth/upwork/callback
  ```

### **2. OAuth 2.0 "Sign in with Upwork" Backend (–ö–†–ò–¢–ò–ß–ù–û)**

#### **SECURITY-005: OAuth 2.0 —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è**
- **–¢–µ—Ä–º—ñ–Ω**: 2-3 –¥–Ω—ñ
- **–ü—Ä—ñ–æ—Ä–∏—Ç–µ—Ç**: –ö–†–ò–¢–ò–ß–ù–û
- **–ó–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ**: Upwork Developer Account

**–ó–∞–≤–¥–∞–Ω–Ω—è:**
- [ ] –í–∏–ø—Ä–∞–≤–∏—Ç–∏ –ø–æ–º–∏–ª–∫–∏ –≤ Auth Service (pyotp, shared module)
- [ ] –Ü–Ω—Ç–µ–≥—Ä—É–≤–∞—Ç–∏ `oauth_manager` –≤ Auth Service
- [ ] –†–µ–∞–ª—ñ–∑—É–≤–∞—Ç–∏ `/auth/upwork/authorize` endpoint
- [ ] –†–µ–∞–ª—ñ–∑—É–≤–∞—Ç–∏ `/auth/upwork/callback` endpoint
- [ ] –î–æ–¥–∞—Ç–∏ –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è Upwork —Ç–æ–∫–µ–Ω—ñ–≤ –≤ –ë–î
- [ ] –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è OAuth flow

#### **UPWORK-002: OAuth 2.0 flow**
- **–¢–µ—Ä–º—ñ–Ω**: 1-2 –¥–Ω—ñ
- **–ü—Ä—ñ–æ—Ä–∏—Ç–µ—Ç**: –í–ò–°–û–ö–ò–ô
- **–ó–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ**: SECURITY-005

**–ó–∞–≤–¥–∞–Ω–Ω—è:**
- [ ] –°—Ç–≤–æ—Ä–∏—Ç–∏ OAuth callback endpoint
- [ ] –ó–±–µ—Ä—ñ–≥–∞–Ω–Ω—è Upwork —Ç–æ–∫–µ–Ω—ñ–≤
- [ ] Refresh token –ª–æ–≥—ñ–∫–∞
- [ ] Error handling
- [ ] –õ–æ–≥—É–≤–∞–Ω–Ω—è OAuth –ø–æ–¥—ñ–π

### **3. Frontend OAuth Integration (–í–ò–°–û–ö–ò–ô)**

#### **UI-005: "Sign in with Upwork" –∫–Ω–æ–ø–∫–∞**
- **–¢–µ—Ä–º—ñ–Ω**: 1-2 –¥–Ω—ñ
- **–ü—Ä—ñ–æ—Ä–∏—Ç–µ—Ç**: –í–ò–°–û–ö–ò–ô
- **–ó–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ**: Backend OAuth

**–ó–∞–≤–¥–∞–Ω–Ω—è:**
- [ ] –°—Ç–≤–æ—Ä–∏—Ç–∏ –≤–µ–ª–∏–∫—É –∫–Ω–æ–ø–∫—É "Sign in with Upwork"
- [ ] –†–µ–∞–ª—ñ–∑—É–≤–∞—Ç–∏ OAuth redirect flow
- [ ] –û–±—Ä–æ–±–∫–∞ OAuth callback
- [ ] –ó–±–µ—Ä–µ–∂–µ–Ω–Ω—è JWT —Ç–æ–∫–µ–Ω–∞ –ø—ñ—Å–ª—è —É—Å–ø—ñ—à–Ω–æ—ó –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—ó
- [ ] –û–Ω–æ–≤–ª–µ–Ω–Ω—è UI –ø—ñ—Å–ª—è –≤—Ö–æ–¥—É
- [ ] Error handling –¥–ª—è OAuth –ø–æ–º–∏–ª–æ–∫

### **4. –ë–∞–∑–∞ –¥–∞–Ω–∏—Ö (–°–ï–†–ï–î–ù–Ü–ô –ø—Ä—ñ–æ—Ä–∏—Ç–µ—Ç)**

#### **–ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è PostgreSQL**
- **–¢–µ—Ä–º—ñ–Ω**: 1 —Ç–∏–∂–¥–µ–Ω—å
- **–ü—Ä—ñ–æ—Ä–∏—Ç–µ—Ç**: –°–ï–†–ï–î–ù–Ü–ô

**–ó–∞–≤–¥–∞–Ω–Ω—è:**
- [ ] –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è PostgreSQL
- [ ] –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –±–∞–∑–∏ –¥–∞–Ω–∏—Ö
- [ ] –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –º—ñ–≥—Ä–∞—Ü—ñ–π –¥–ª—è OAuth —Ç–æ–∫–µ–Ω—ñ–≤
- [ ] –¢–µ—Å—Ç–æ–≤—ñ –¥–∞–Ω—ñ

---

## üìã **–î–µ—Ç–∞–ª—å–Ω–∏–π –ø–ª–∞–Ω –¥—ñ–π**

### **–î–µ–Ω—å 1-2: Upwork Developer Account**
1. **–î–µ–Ω—å 1**: –†–µ—î—Å—Ç—Ä–∞—Ü—ñ—è –Ω–∞ Upwork Developer Portal
2. **–î–µ–Ω—å 2**: –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è OAuth application —Ç–∞ –æ—Ç—Ä–∏–º–∞–Ω–Ω—è credentials

### **–î–µ–Ω—å 3-5: Backend OAuth**
1. **–î–µ–Ω—å 3**: –í–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è –ø–æ–º–∏–ª–æ–∫ Auth Service
2. **–î–µ–Ω—å 4**: –Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è OAuth manager
3. **–î–µ–Ω—å 5**: –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è OAuth endpoints

### **–î–µ–Ω—å 6-7: Frontend OAuth**
1. **–î–µ–Ω—å 6**: –°—Ç–≤–æ—Ä–µ–Ω–Ω—è "Sign in with Upwork" –∫–Ω–æ–ø–∫–∏
2. **–î–µ–Ω—å 7**: –Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è –∑ Backend —Ç–∞ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è

### **–¢–∏–∂–¥–µ–Ω—å 2: –ë–∞–∑–∞ –¥–∞–Ω–∏—Ö**
1. **–î–µ–Ω—å 1-3**: –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è PostgreSQL
2. **–î–µ–Ω—å 4-7**: –ú—ñ–≥—Ä–∞—Ü—ñ—ó —Ç–∞ —Ç–µ—Å—Ç–æ–≤—ñ –¥–∞–Ω—ñ

---

## üéØ **–û—á—ñ–∫—É–≤–∞–Ω—ñ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∏**

### **–ü—ñ—Å–ª—è Upwork Developer Account:**
- ‚úÖ –û—Ç—Ä–∏–º–∞–Ω—ñ Client ID —Ç–∞ Client Secret
- ‚úÖ –ù–∞–ª–∞—à—Ç–æ–≤–∞–Ω–∞ OAuth application
- ‚úÖ –ì–æ—Ç–æ–≤–Ω—ñ—Å—Ç—å –¥–æ OAuth —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—ó

### **–ü—ñ—Å–ª—è Backend OAuth:**
- ‚úÖ –ü—Ä–∞—Ü—é—é—á—ñ OAuth endpoints
- ‚úÖ –ó–±–µ—Ä–µ–∂–µ–Ω–Ω—è Upwork —Ç–æ–∫–µ–Ω—ñ–≤
- ‚úÖ –ë–µ–∑–ø–µ—á–Ω–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—è —á–µ—Ä–µ–∑ Upwork

### **–ü—ñ—Å–ª—è Frontend OAuth:**
- ‚úÖ –í–µ–ª–∏–∫–∞ –∫–Ω–æ–ø–∫–∞ "Sign in with Upwork"
- ‚úÖ –ü–æ–≤–Ω–∏–π OAuth flow
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏–π –≤—Ö—ñ–¥ –ø—ñ—Å–ª—è OAuth –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—ó

### **–ü—ñ—Å–ª—è –±–∞–∑–∏ –¥–∞–Ω–∏—Ö:**
- ‚úÖ –ó–±–µ—Ä—ñ–≥–∞–Ω–Ω—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤
- ‚úÖ –ó–±–µ—Ä—ñ–≥–∞–Ω–Ω—è Upwork —Ç–æ–∫–µ–Ω—ñ–≤
- ‚úÖ –ü–æ–≤–Ω–∞ —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω—ñ—Å—Ç—å –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—ó

---

## ‚ö†Ô∏è **–†–∏–∑–∏–∫–∏ —Ç–∞ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ**

### **–ö—Ä–∏—Ç–∏—á–Ω—ñ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ:**
1. **Upwork Developer Account** - –Ω–µ–æ–±—Ö—ñ–¥–Ω–æ –¥–ª—è OAuth
2. **Upwork API limits** - –º–æ–∂—É—Ç—å –æ–±–º–µ–∂—É–≤–∞—Ç–∏ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è
3. **OAuth callback URLs** - –ø–æ—Ç—Ä–µ–±—É—é—Ç—å –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è

### **–ú–æ–∂–ª–∏–≤—ñ –ø—Ä–æ–±–ª–µ–º–∏:**
1. **Upwork API –∑–º—ñ–Ω–∏** - –º–æ–∂—É—Ç—å –ø–æ—Ä—É—à–∏—Ç–∏ —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—é
2. **Rate limiting** - –ø–æ—Ç—Ä–µ–±—É—î —Ä–µ—Ç–µ–ª—å–Ω–æ—ó –æ–±—Ä–æ–±–∫–∏
3. **Token expiration** - –Ω–µ–æ–±—Ö—ñ–¥–Ω–∞ –ª–æ–≥—ñ–∫–∞ refresh

---

## üìä **–ú–µ—Ç—Ä–∏–∫–∏ —É—Å–ø—ñ—Ö—É**

### **OAuth —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è:**
- [ ] 100% —É—Å–ø—ñ—à–Ω–∏—Ö OAuth flows
- [ ] < 5 —Å–µ–∫—É–Ω–¥ –Ω–∞ OAuth –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—é
- [ ] 0 –ø–æ–º–∏–ª–æ–∫ —Ç–æ–∫–µ–Ω—ñ–≤

### **Frontend:**
- [ ] –í–µ–ª–∏–∫–∞ –ø–æ–º—ñ—Ç–Ω–∞ –∫–Ω–æ–ø–∫–∞ "Sign in with Upwork"
- [ ] –ü–ª–∞–≤–Ω–∏–π OAuth flow
- [ ] –ü—Ä–∞–≤–∏–ª—å–Ω–∞ –æ–±—Ä–æ–±–∫–∞ –ø–æ–º–∏–ª–æ–∫

### **–ó–∞–≥–∞–ª—å–Ω—ñ:**
- [ ] 95% uptime
- [ ] < 500ms API response time
- [ ] 0 –∫—Ä–∏—Ç–∏—á–Ω–∏—Ö –ø–æ–º–∏–ª–æ–∫

---

## üéâ **–ù–∞—Å—Ç—É–ø–Ω–∏–π –º—ñ–ª—ñ—Å—Ç–æ–Ω**

**–¶—ñ–ª—å**: –ü–æ–≤–Ω–∞ OAuth 2.0 "Sign in with Upwork" —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è –∑ –ø—Ä–∞—Ü—é—é—á–æ—é –∫–Ω–æ–ø–∫–æ—é –≤—Ö–æ–¥—É.

**–û—á—ñ–∫—É–≤–∞–Ω–∞ –¥–∞—Ç–∞**: 1 —Ç–∏–∂–¥–µ–Ω—å –≤—ñ–¥ –ø–æ—Ç–æ—á–Ω–æ–≥–æ –º–æ–º–µ–Ω—Ç—É.

**–†–µ–∑—É–ª—å—Ç–∞—Ç**: –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ –∑–º–æ–∂—É—Ç—å –≤—Ö–æ–¥–∏—Ç–∏ –Ω–∞ —Å–∞–π—Ç —á–µ—Ä–µ–∑ –≤–µ–ª–∏–∫—É –∫–Ω–æ–ø–∫—É "Sign in with Upwork" –±–µ–∑ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –æ–∫—Ä–µ–º–æ–≥–æ –∞–∫–∞—É–Ω—Ç—É.

---

## üîß **–¢–µ—Ö–Ω—ñ—á–Ω—ñ –¥–µ—Ç–∞–ª—ñ**

### **OAuth Flow:**
1. –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á –Ω–∞—Ç–∏—Å–∫–∞—î "Sign in with Upwork"
2. Frontend –≤–∏–∫–ª–∏–∫–∞—î `/auth/upwork/authorize`
3. Backend –≥–µ–Ω–µ—Ä—É—î OAuth URL —Ç–∞ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è—î –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞
4. –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á –∞–≤—Ç–æ—Ä–∏–∑—É—î—Ç—å—Å—è –Ω–∞ Upwork
5. Upwork –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è—î –Ω–∞ `/auth/upwork/callback`
6. Backend –æ–±—Ä–æ–±–ª—è—î callback —Ç–∞ —Å—Ç–≤–æ—Ä—é—î JWT —Ç–æ–∫–µ–Ω
7. Frontend –æ—Ç—Ä–∏–º—É—î JWT —Ç–æ–∫–µ–Ω —Ç–∞ –≤—Ö–æ–¥–∏—Ç—å –≤ —Å–∏—Å—Ç–µ–º—É

### **–ù–µ–æ–±—Ö—ñ–¥–Ω—ñ —Ñ–∞–π–ª–∏ –¥–ª—è –æ–Ω–æ–≤–ª–µ–Ω–Ω—è:**
- `app/backend/services/auth-service/src/main.py`
- `app/backend/services/auth-service/src/oauth.py`
- `app/frontend/src/pages/Login.tsx`
- `app/frontend/src/services/auth.ts`
- `.env` (–∑ Upwork credentials) 