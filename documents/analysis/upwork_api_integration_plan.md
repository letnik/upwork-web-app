# üîó –ü–ª–∞–Ω —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—ó –∑ Upwork API

## üìã –û–≥–ª—è–¥

–î–µ—Ç–∞–ª—å–Ω–∏–π –ø–ª–∞–Ω —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—ó –∑ –æ—Ñ—ñ—Ü—ñ–π–Ω–∏–º Upwork API –¥–ª—è —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –ø–æ–≤–Ω–æ—Ü—ñ–Ω–Ω–æ–≥–æ –≤–µ–±-–¥–æ–¥–∞—Ç–∫—É –∑ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü—ñ—î—é —Ä–æ–±–æ—Ç–∏ –∑ –≤–∞–∫–∞–Ω—Å—ñ—è–º–∏, –≤—ñ–¥–≥—É–∫–∞–º–∏ —Ç–∞ –ø–µ—Ä–µ–ø–∏—Å–∫–æ—é.

## üéØ –û—Å–Ω–æ–≤–Ω—ñ —Ü—ñ–ª—ñ

### 1. **–û—Ñ—ñ—Ü—ñ–π–Ω–∞ —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è**
- –†–µ—î—Å—Ç—Ä–∞—Ü—ñ—è –Ω–∞ developers.upwork.com
- –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è OAuth 2.0 –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—ó
- –°—Ç–≤–æ—Ä–µ–Ω–Ω—è UpworkAPIClient
- –ë–µ–∑–ø–µ—á–Ω–∏–π –¥–æ—Å—Ç—É–ø –¥–æ –¥–∞–Ω–∏—Ö

### 2. **–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü—ñ—è —Ä–æ–±–æ—Ç–∏**
- –ü–æ—à—É–∫ —Ç–∞ —Ñ—ñ–ª—å—Ç—Ä–∞—Ü—ñ—è –≤–∞–∫–∞–Ω—Å—ñ–π
- AI –≥–µ–Ω–µ—Ä–∞—Ü—ñ—è –ø–µ—Ä—Å–æ–Ω–∞–ª—ñ–∑–æ–≤–∞–Ω–∏—Ö –≤—ñ–¥–≥—É–∫—ñ–≤
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –≤—ñ–¥–ø—Ä–∞–≤–ª–µ–Ω–Ω—è –≤—ñ–¥–≥—É–∫—ñ–≤
- –í–µ–¥–µ–Ω–Ω—è –ø–µ—Ä–µ–ø–∏—Å–∫–∏ –∑ –∫–ª—ñ—î–Ω—Ç–∞–º–∏

### 3. **–ê–Ω–∞–ª—ñ—Ç–∏–∫–∞ —Ç–∞ –æ–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—è**
- –í—ñ–¥—Å—Ç–µ–∂–µ–Ω–Ω—è –µ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—ñ –≤—ñ–¥–≥—É–∫—ñ–≤
- A/B —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è —Ä—ñ–∑–Ω–∏—Ö —Å—Ç—Ä–∞—Ç–µ–≥—ñ–π
- –ü—Ä–æ–≥–Ω–æ–∑—É–≤–∞–Ω–Ω—è —É—Å–ø—ñ—à–Ω–æ—Å—Ç—ñ
- –û–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—è –ø—Ä–æ—Ü–µ—Å—ñ–≤

## üöÄ –ï—Ç–∞–ø–∏ —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—ó

### **–ï—Ç–∞–ø 1: –†–µ—î—Å—Ç—Ä–∞—Ü—ñ—è —Ç–∞ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è (1 —Ç–∏–∂–¥–µ–Ω—å)**

#### 1.1 –†–µ—î—Å—Ç—Ä–∞—Ü—ñ—è –Ω–∞ developers.upwork.com
- –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –∞–∫–∞—É–Ω—Ç—É —Ä–æ–∑—Ä–æ–±–Ω–∏–∫–∞
- –ó–∞–ø–æ–≤–Ω–µ–Ω–Ω—è –ø—Ä–æ—Ñ—ñ–ª—é –∫–æ–º–ø–∞–Ω—ñ—ó
- –û–ø–∏—Å –ø–ª–∞–Ω—É–≤–∞–Ω–æ–≥–æ –¥–æ–¥–∞—Ç–∫—É
- –û—Ç—Ä–∏–º–∞–Ω–Ω—è —Å—Ö–≤–∞–ª–µ–Ω–Ω—è –≤—ñ–¥ Upwork

#### 1.2 –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –¥–æ–¥–∞—Ç–∫—É
```json
{
  "app_name": "Upwork Automation Suite",
  "description": "AI-powered automation tool for Upwork freelancers",
  "website": "https://your-app-domain.com",
  "callback_url": "https://your-app-domain.com/oauth/callback",
  "scopes": [
    "jobs:read",
    "jobs:write", 
    "freelancers:read",
    "clients:read",
    "messages:read",
    "messages:write"
  ]
}
```

#### 1.3 –û—Ç—Ä–∏–º–∞–Ω–Ω—è API –∫–ª—é—á—ñ–≤
```python
# –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è API
UPWORK_CLIENT_ID = "your_client_id"
UPWORK_CLIENT_SECRET = "your_client_secret"
UPWORK_CALLBACK_URL = "https://your-app-domain.com/oauth/callback"
```

### **–ï—Ç–∞–ø 2: OAuth 2.0 –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—è (1 —Ç–∏–∂–¥–µ–Ω—å)**

#### 2.1 –°—Ç–≤–æ—Ä–µ–Ω–Ω—è OAuth2Manager
```python
class OAuth2Manager:
    def __init__(self, client_id, client_secret):
        self.client_id = client_id
        self.client_secret = client_secret
        self.redirect_uri = UPWORK_CALLBACK_URL
    
    def get_authorization_url(self, state=None):
        """–ì–µ–Ω–µ—Ä–∞—Ü—ñ—è URL –¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—ó"""
        params = {
            'response_type': 'code',
            'client_id': self.client_id,
            'redirect_uri': self.redirect_uri,
            'scope': ' '.join(UPWORK_SCOPES)
        }
        if state:
            params['state'] = state
        
        return f"{UPWORK_AUTH_URL}?{urlencode(params)}"
    
    def get_access_token(self, authorization_code):
        """–û—Ç—Ä–∏–º–∞–Ω–Ω—è access token"""
        data = {
            'grant_type': 'authorization_code',
            'code': authorization_code,
            'client_id': self.client_id,
            'client_secret': self.client_secret,
            'redirect_uri': self.redirect_uri
        }
        
        response = requests.post(UPWORK_TOKEN_URL, data=data)
        return response.json()
    
    def refresh_token(self, refresh_token):
        """–û–Ω–æ–≤–ª–µ–Ω–Ω—è access token"""
        data = {
            'grant_type': 'refresh_token',
            'refresh_token': refresh_token,
            'client_id': self.client_id,
            'client_secret': self.client_secret
        }
        
        response = requests.post(UPWORK_TOKEN_URL, data=data)
        return response.json()
```

#### 2.2 –í–µ–±-—ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—ó
```python
@app.route('/oauth/authorize')
def oauth_authorize():
    """–ü–æ—á–∞—Ç–æ–∫ OAuth –ø—Ä–æ—Ü–µ—Å—É"""
    state = generate_state()
    session['oauth_state'] = state
    
    auth_url = oauth_manager.get_authorization_url(state)
    return redirect(auth_url)

@app.route('/oauth/callback')
def oauth_callback():
    """–û–±—Ä–æ–±–∫–∞ OAuth callback"""
    code = request.args.get('code')
    state = request.args.get('state')
    
    if state != session.get('oauth_state'):
        return 'Invalid state parameter', 400
    
    try:
        token_data = oauth_manager.get_access_token(code)
        session['access_token'] = token_data['access_token']
        session['refresh_token'] = token_data['refresh_token']
        
        return redirect('/dashboard')
    except Exception as e:
        return f'OAuth error: {e}', 400
```

### **–ï—Ç–∞–ø 3: UpworkAPIClient (2 —Ç–∏–∂–Ω—ñ)**

#### 3.1 –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –∫–ª—ñ—î–Ω—Ç–∞
```python
class UpworkAPIClient:
    def __init__(self, access_token=None):
        self.access_token = access_token
        self.base_url = "https://api.upwork.com/api/v2"
        self.session = requests.Session()
        
        if access_token:
            self.session.headers.update({
                'Authorization': f'Bearer {access_token}',
                'Content-Type': 'application/json'
            })
    
    def search_jobs(self, query, **filters):
        """–ü–æ—à—É–∫ –≤–∞–∫–∞–Ω—Å—ñ–π"""
        endpoint = f"{self.base_url}/jobs/search"
        
        params = {
            'q': query,
            'paging': 0,
            'count': 20
        }
        params.update(filters)
        
        response = self.session.get(endpoint, params=params)
        return response.json()
    
    def get_job_details(self, job_id):
        """–û—Ç—Ä–∏–º–∞–Ω–Ω—è –¥–µ—Ç–∞–ª–µ–π –≤–∞–∫–∞–Ω—Å—ñ—ó"""
        endpoint = f"{self.base_url}/jobs/{job_id}"
        response = self.session.get(endpoint)
        return response.json()
    
    def submit_proposal(self, job_id, proposal_data):
        """–í—ñ–¥–ø—Ä–∞–≤–∫–∞ –≤—ñ–¥–≥—É–∫—É –Ω–∞ –≤–∞–∫–∞–Ω—Å—ñ—é"""
        endpoint = f"{self.base_url}/jobs/{job_id}/proposals"
        response = self.session.post(endpoint, json=proposal_data)
        return response.json()
    
    def get_messages(self, job_id=None):
        """–û—Ç—Ä–∏–º–∞–Ω–Ω—è –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å"""
        endpoint = f"{self.base_url}/messages"
        params = {}
        if job_id:
            params['job_id'] = job_id
        
        response = self.session.get(endpoint, params=params)
        return response.json()
    
    def send_message(self, message_data):
        """–í—ñ–¥–ø—Ä–∞–≤–∫–∞ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è"""
        endpoint = f"{self.base_url}/messages"
        response = self.session.post(endpoint, json=message_data)
        return response.json()
```

#### 3.2 –†–æ–∑—à–∏—Ä–µ–Ω—ñ –º–µ—Ç–æ–¥–∏
```python
class UpworkAPIClient:
    def get_client_info(self, client_id):
        """–Ü–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è –ø—Ä–æ –∫–ª—ñ—î–Ω—Ç–∞"""
        endpoint = f"{self.base_url}/clients/{client_id}"
        response = self.session.get(endpoint)
        return response.json()
    
    def get_freelancer_profile(self, freelancer_id):
        """–ü—Ä–æ—Ñ—ñ–ª—å —Ñ—Ä—ñ–ª–∞–Ω—Å–µ—Ä–∞"""
        endpoint = f"{self.base_url}/freelancers/{freelancer_id}"
        response = self.session.get(endpoint)
        return response.json()
    
    def get_categories(self):
        """–°–ø–∏—Å–æ–∫ –∫–∞—Ç–µ–≥–æ—Ä—ñ–π"""
        endpoint = f"{self.base_url}/categories"
        response = self.session.get(endpoint)
        return response.json()
    
    def get_skills(self):
        """–°–ø–∏—Å–æ–∫ –Ω–∞–≤–∏—á–æ–∫"""
        endpoint = f"{self.base_url}/skills"
        response = self.session.get(endpoint)
        return response.json()
```

### **–ï—Ç–∞–ø 4: AI —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è (2 —Ç–∏–∂–Ω—ñ)**

#### 4.1 AIGenerator –¥–ª—è –≤—ñ–¥–≥—É–∫—ñ–≤
```python
class AIGenerator:
    def __init__(self, openai_api_key):
        self.openai_client = OpenAI(api_key=openai_api_key)
    
    def generate_proposal(self, job_data, freelancer_profile):
        """–ì–µ–Ω–µ—Ä–∞—Ü—ñ—è –ø–µ—Ä—Å–æ–Ω–∞–ª—ñ–∑–æ–≤–∞–Ω–æ–≥–æ –≤—ñ–¥–≥—É–∫—É"""
        prompt = self._create_proposal_prompt(job_data, freelancer_profile)
        
        response = self.openai_client.chat.completions.create(
            model="gpt-4",
            messages=[
                {"role": "system", "content": "You are an expert freelancer writing proposals for Upwork jobs."},
                {"role": "user", "content": prompt}
            ],
            max_tokens=1000,
            temperature=0.7
        )
        
        return response.choices[0].message.content
    
    def _create_proposal_prompt(self, job_data, freelancer_profile):
        """–°—Ç–≤–æ—Ä–µ–Ω–Ω—è –ø—Ä–æ–º–ø—Ç—É –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü—ñ—ó"""
        return f"""
        Job Title: {job_data['title']}
        Job Description: {job_data['description']}
        Budget: {job_data['budget']}
        Required Skills: {', '.join(job_data['skills'])}
        
        Freelancer Profile:
        - Experience: {freelancer_profile['experience']}
        - Skills: {', '.join(freelancer_profile['skills'])}
        - Portfolio: {freelancer_profile['portfolio']}
        
        Write a personalized proposal that:
        1. Addresses the client's specific needs
        2. Highlights relevant experience
        3. Proposes a clear solution
        4. Shows understanding of the project
        5. Includes a call to action
        
        Keep it professional, concise, and compelling.
        """
    
    def generate_message_response(self, message_content, context):
        """–ì–µ–Ω–µ—Ä–∞—Ü—ñ—è –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ –Ω–∞ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è"""
        prompt = f"""
        Client Message: {message_content}
        Context: {context}
        
        Generate a professional and helpful response that:
        1. Addresses the client's question/concern
        2. Shows expertise and professionalism
        3. Maintains positive communication
        4. Moves the conversation forward
        """
        
        response = self.openai_client.chat.completions.create(
            model="gpt-4",
            messages=[
                {"role": "system", "content": "You are a professional freelancer communicating with clients."},
                {"role": "user", "content": prompt}
            ],
            max_tokens=500,
            temperature=0.6
        )
        
        return response.choices[0].message.content
```

#### 4.2 SmartFilter –¥–ª—è –≤–∞–∫–∞–Ω—Å—ñ–π
```python
class SmartFilter:
    def __init__(self, ai_generator):
        self.ai_generator = ai_generator
    
    def analyze_job_suitability(self, job_data, freelancer_profile):
        """–ê–Ω–∞–ª—ñ–∑ –ø—ñ–¥—Ö–æ–¥—è—â–æ—Å—Ç—ñ –≤–∞–∫–∞–Ω—Å—ñ—ó"""
        prompt = f"""
        Job: {job_data['title']}
        Description: {job_data['description']}
        Budget: {job_data['budget']}
        Skills: {job_data['skills']}
        
        Freelancer Profile:
        - Skills: {freelancer_profile['skills']}
        - Experience: {freelancer_profile['experience']}
        - Rate: {freelancer_profile['hourly_rate']}
        
        Analyze if this job is suitable for the freelancer.
        Consider:
        1. Skill match (0-10)
        2. Budget appropriateness (0-10)
        3. Project complexity match (0-10)
        4. Client rating and history
        5. Overall recommendation (Yes/No)
        
        Return JSON format:
        {{
            "skill_match": 8,
            "budget_match": 7,
            "complexity_match": 9,
            "client_rating": 4.8,
            "recommendation": "Yes",
            "reasoning": "Detailed explanation..."
        }}
        """
        
        response = self.ai_generator.openai_client.chat.completions.create(
            model="gpt-4",
            messages=[
                {"role": "system", "content": "You are an expert job matching analyst."},
                {"role": "user", "content": prompt}
            ],
            max_tokens=300,
            temperature=0.3
        )
        
        return json.loads(response.choices[0].message.content)
    
    def filter_jobs(self, jobs, freelancer_profile, min_score=7):
        """–§—ñ–ª—å—Ç—Ä–∞—Ü—ñ—è –≤–∞–∫–∞–Ω—Å—ñ–π –∑–∞ –∫—Ä–∏—Ç–µ—Ä—ñ—è–º–∏"""
        suitable_jobs = []
        
        for job in jobs:
            analysis = self.analyze_job_suitability(job, freelancer_profile)
            
            if analysis['recommendation'] == 'Yes':
                job['ai_analysis'] = analysis
                suitable_jobs.append(job)
        
        # –°–æ—Ä—Ç—É–≤–∞–Ω–Ω—è –∑–∞ –∑–∞–≥–∞–ª—å–Ω–∏–º –±–∞–ª–æ–º
        suitable_jobs.sort(
            key=lambda x: (x['ai_analysis']['skill_match'] + 
                          x['ai_analysis']['budget_match'] + 
                          x['ai_analysis']['complexity_match']) / 3,
            reverse=True
        )
        
        return suitable_jobs
```

### **–ï—Ç–∞–ø 5: –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü—ñ—è –≤—ñ–¥–≥—É–∫—ñ–≤ (2 —Ç–∏–∂–Ω—ñ)**

#### 5.1 ApplicationService
```python
class ApplicationService:
    def __init__(self, api_client, ai_generator, smart_filter):
        self.api_client = api_client
        self.ai_generator = ai_generator
        self.smart_filter = smart_filter
        self.db = Database()
    
    def auto_apply_to_jobs(self, search_queries, freelancer_profile):
        """–ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –≤—ñ–¥–≥—É–∫–∞–Ω–Ω—è –Ω–∞ –≤–∞–∫–∞–Ω—Å—ñ—ó"""
        for query in search_queries:
            try:
                # –ü–æ—à—É–∫ –≤–∞–∫–∞–Ω—Å—ñ–π
                jobs = self.api_client.search_jobs(query)
                
                # –§—ñ–ª—å—Ç—Ä–∞—Ü—ñ—è –ø—ñ–¥—Ö–æ–¥—è—â–∏—Ö
                suitable_jobs = self.smart_filter.filter_jobs(
                    jobs['jobs'], 
                    freelancer_profile
                )
                
                # –í—ñ–¥–≥—É–∫–∞–Ω–Ω—è –Ω–∞ —Ç–æ–ø –≤–∞–∫–∞–Ω—Å—ñ—ó
                for job in suitable_jobs[:5]:  # –¢–æ–ø 5 –≤–∞–∫–∞–Ω—Å—ñ–π
                    self.apply_to_job(job, freelancer_profile)
                    
            except Exception as e:
                logger.error(f"Error processing query '{query}': {e}")
    
    def apply_to_job(self, job, freelancer_profile):
        """–í—ñ–¥–≥—É–∫–∞–Ω–Ω—è –Ω–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—É –≤–∞–∫–∞–Ω—Å—ñ—é"""
        try:
            # –ì–µ–Ω–µ—Ä–∞—Ü—ñ—è –≤—ñ–¥–≥—É–∫—É
            proposal_text = self.ai_generator.generate_proposal(
                job, 
                freelancer_profile
            )
            
            # –ü—ñ–¥–≥–æ—Ç–æ–≤–∫–∞ –¥–∞–Ω–∏—Ö –¥–ª—è –≤—ñ–¥–ø—Ä–∞–≤–∫–∏
            proposal_data = {
                'cover_letter': proposal_text,
                'bid_amount': self._calculate_bid_amount(job, freelancer_profile),
                'estimated_duration': self._estimate_duration(job),
                'attachments': []
            }
            
            # –í—ñ–¥–ø—Ä–∞–≤–∫–∞ —á–µ—Ä–µ–∑ API
            response = self.api_client.submit_proposal(
                job['id'], 
                proposal_data
            )
            
            # –ó–±–µ—Ä–µ–∂–µ–Ω–Ω—è –≤ –±–∞–∑—É –¥–∞–Ω–∏—Ö
            self.db.save_application({
                'job_id': job['id'],
                'proposal_text': proposal_text,
                'bid_amount': proposal_data['bid_amount'],
                'status': 'submitted',
                'submitted_at': datetime.now(),
                'ai_generated': True
            })
            
            logger.info(f"Successfully applied to job {job['id']}")
            
        except Exception as e:
            logger.error(f"Error applying to job {job['id']}: {e}")
    
    def _calculate_bid_amount(self, job, freelancer_profile):
        """–†–æ–∑—Ä–∞—Ö—É–Ω–æ–∫ —Å—É–º–∏ –ø—Ä–æ–ø–æ–∑–∏—Ü—ñ—ó"""
        if job['budget']['type'] == 'fixed':
            # –î–ª—è —Ñ—ñ–∫—Å–æ–≤–∞–Ω–∏—Ö –ø—Ä–æ–µ–∫—Ç—ñ–≤
            base_amount = job['budget']['max']
            # –ê–¥–∞–ø—Ç–∞—Ü—ñ—è –ø—ñ–¥ –¥–æ—Å–≤—ñ–¥
            experience_multiplier = min(1.2, 1 + (freelancer_profile['experience_years'] * 0.1))
            return int(base_amount * experience_multiplier)
        else:
            # –î–ª—è –ø–æ–≥–æ–¥–∏–Ω–Ω–∏—Ö –ø—Ä–æ–µ–∫—Ç—ñ–≤
            return freelancer_profile['hourly_rate']
    
    def _estimate_duration(self, job):
        """–û—Ü—ñ–Ω–∫–∞ —Ç—Ä–∏–≤–∞–ª–æ—Å—Ç—ñ –ø—Ä–æ–µ–∫—Ç—É"""
        # –õ–æ–≥—ñ–∫–∞ –æ—Ü—ñ–Ω–∫–∏ –Ω–∞ –æ—Å–Ω–æ–≤—ñ –æ–ø–∏—Å—É —Ç–∞ —Å–∫–ª–∞–¥–Ω–æ—Å—Ç—ñ
        description_length = len(job['description'])
        skills_count = len(job['skills'])
        
        if description_length < 500:
            return "1-3 days"
        elif description_length < 1000:
            return "1-2 weeks"
        else:
            return "2-4 weeks"
```

### **–ï—Ç–∞–ø 6: –í–µ–¥–µ–Ω–Ω—è –ø–µ—Ä–µ–ø–∏—Å–∫–∏ (2 —Ç–∏–∂–Ω—ñ)**

#### 6.1 MessagingService
```python
class MessagingService:
    def __init__(self, api_client, ai_generator):
        self.api_client = api_client
        self.ai_generator = ai_generator
        self.db = Database()
    
    def auto_respond_to_messages(self):
        """–ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω—ñ –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ –Ω–∞ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è"""
        try:
            # –û—Ç—Ä–∏–º–∞–Ω–Ω—è –Ω–æ–≤–∏—Ö –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å
            messages = self.api_client.get_messages()
            
            for message in messages['messages']:
                if not self._is_responded(message['id']):
                    response = self._generate_response(message)
                    self._send_response(message, response)
                    
        except Exception as e:
            logger.error(f"Error processing messages: {e}")
    
    def _generate_response(self, message):
        """–ì–µ–Ω–µ—Ä–∞—Ü—ñ—è –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ –Ω–∞ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è"""
        context = self._get_message_context(message)
        
        return self.ai_generator.generate_message_response(
            message['content'],
            context
        )
    
    def _get_message_context(self, message):
        """–û—Ç—Ä–∏–º–∞–Ω–Ω—è –∫–æ–Ω—Ç–µ–∫—Å—Ç—É –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è"""
        # –û—Ç—Ä–∏–º–∞–Ω–Ω—è —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—ó –ø—Ä–æ –ø—Ä–æ–µ–∫—Ç —Ç–∞ –∫–ª—ñ—î–Ω—Ç–∞
        job_info = self.api_client.get_job_details(message['job_id'])
        client_info = self.api_client.get_client_info(message['client_id'])
        
        return {
            'job_title': job_info['title'],
            'client_name': client_info['name'],
            'client_rating': client_info['rating'],
            'project_budget': job_info['budget'],
            'message_history': self._get_message_history(message['job_id'])
        }
    
    def _send_response(self, original_message, response_text):
        """–í—ñ–¥–ø—Ä–∞–≤–∫–∞ –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ"""
        message_data = {
            'job_id': original_message['job_id'],
            'content': response_text,
            'type': 'response'
        }
        
        try:
            result = self.api_client.send_message(message_data)
            
            # –ó–±–µ—Ä–µ–∂–µ–Ω–Ω—è –≤ –±–∞–∑—É –¥–∞–Ω–∏—Ö
            self.db.save_message({
                'original_message_id': original_message['id'],
                'response_text': response_text,
                'sent_at': datetime.now(),
                'ai_generated': True
            })
            
            logger.info(f"Response sent to message {original_message['id']}")
            
        except Exception as e:
            logger.error(f"Error sending response: {e}")
    
    def _is_responded(self, message_id):
        """–ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —á–∏ –≤–∂–µ –≤—ñ–¥–ø–æ–≤—ñ–ª–∏ –Ω–∞ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è"""
        return self.db.check_message_response(message_id)
    
    def _get_message_history(self, job_id):
        """–û—Ç—Ä–∏–º–∞–Ω–Ω—è —ñ—Å—Ç–æ—Ä—ñ—ó –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å –¥–ª—è –ø—Ä–æ–µ–∫—Ç—É"""
        messages = self.api_client.get_messages(job_id=job_id)
        return messages['messages'][-5:]  # –û—Å—Ç–∞–Ω–Ω—ñ 5 –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å
```

## üìä –ë–∞–∑–∞ –¥–∞–Ω–∏—Ö

### –°—Ö–µ–º–∞ —Ç–∞–±–ª–∏—Ü—å
```sql
-- –¢–∞–±–ª–∏—Ü—è –≤–∞–∫–∞–Ω—Å—ñ–π
CREATE TABLE jobs (
    id SERIAL PRIMARY KEY,
    upwork_id VARCHAR(50) UNIQUE,
    title VARCHAR(255),
    description TEXT,
    budget_min DECIMAL(10,2),
    budget_max DECIMAL(10,2),
    budget_type VARCHAR(20),
    skills JSONB,
    client_id VARCHAR(50),
    client_name VARCHAR(255),
    client_rating DECIMAL(3,2),
    posted_time TIMESTAMP,
    category VARCHAR(100),
    subcategory VARCHAR(100),
    experience_level VARCHAR(50),
    project_length VARCHAR(100),
    hours_per_week VARCHAR(100),
    url TEXT,
    ai_analysis JSONB,
    created_at TIMESTAMP DEFAULT NOW()
);

-- –¢–∞–±–ª–∏—Ü—è –≤—ñ–¥–≥—É–∫—ñ–≤
CREATE TABLE applications (
    id SERIAL PRIMARY KEY,
    job_id VARCHAR(50),
    proposal_text TEXT,
    bid_amount DECIMAL(10,2),
    status VARCHAR(50),
    submitted_at TIMESTAMP,
    ai_generated BOOLEAN DEFAULT FALSE,
    template_used VARCHAR(100),
    effectiveness_score DECIMAL(3,2),
    created_at TIMESTAMP DEFAULT NOW()
);

-- –¢–∞–±–ª–∏—Ü—è –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å
CREATE TABLE messages (
    id SERIAL PRIMARY KEY,
    upwork_message_id VARCHAR(50),
    job_id VARCHAR(50),
    client_id VARCHAR(50),
    content TEXT,
    message_type VARCHAR(20),
    sent_at TIMESTAMP,
    ai_generated BOOLEAN DEFAULT FALSE,
    response_to_message_id VARCHAR(50),
    created_at TIMESTAMP DEFAULT NOW()
);

-- –¢–∞–±–ª–∏—Ü—è —à–∞–±–ª–æ–Ω—ñ–≤
CREATE TABLE templates (
    id SERIAL PRIMARY KEY,
    name VARCHAR(255),
    category VARCHAR(100),
    content TEXT,
    variables JSONB,
    effectiveness_score DECIMAL(3,2),
    usage_count INTEGER DEFAULT 0,
    created_at TIMESTAMP DEFAULT NOW()
);

-- –¢–∞–±–ª–∏—Ü—è –∞–Ω–∞–ª—ñ—Ç–∏–∫–∏
CREATE TABLE analytics (
    id SERIAL PRIMARY KEY,
    date DATE,
    total_applications INTEGER,
    successful_applications INTEGER,
    response_rate DECIMAL(5,2),
    average_bid_amount DECIMAL(10,2),
    top_performing_template VARCHAR(100),
    created_at TIMESTAMP DEFAULT NOW()
);
```

## üîß –¢–µ—Ö–Ω—ñ—á–Ω–∞ —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—è

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç—É
```
upwork_web_app/
‚îú‚îÄ‚îÄ backend/
‚îÇ   ‚îú‚îÄ‚îÄ api/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ upwork_client.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ oauth_manager.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ai_generator.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ smart_filter.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ application_service.py
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ messaging_service.py
‚îÇ   ‚îú‚îÄ‚îÄ database/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ models.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ connection.py
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ migrations/
‚îÇ   ‚îú‚îÄ‚îÄ config/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ settings.py
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ logging.py
‚îÇ   ‚îú‚îÄ‚îÄ utils/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ helpers.py
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ validators.py
‚îÇ   ‚îî‚îÄ‚îÄ main.py
‚îú‚îÄ‚îÄ frontend/
‚îÇ   ‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ components/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ pages/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ services/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ utils/
‚îÇ   ‚îú‚îÄ‚îÄ public/
‚îÇ   ‚îî‚îÄ‚îÄ package.json
‚îú‚îÄ‚îÄ docker-compose.yml
‚îú‚îÄ‚îÄ requirements.txt
‚îî‚îÄ‚îÄ README.md
```

### –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è
```python
# config/settings.py
import os
from dotenv import load_dotenv

load_dotenv()

class Settings:
    # Upwork API
    UPWORK_CLIENT_ID = os.getenv('UPWORK_CLIENT_ID')
    UPWORK_CLIENT_SECRET = os.getenv('UPWORK_CLIENT_SECRET')
    UPWORK_CALLBACK_URL = os.getenv('UPWORK_CALLBACK_URL')
    
    # AI Services
    OPENAI_API_KEY = os.getenv('OPENAI_API_KEY')
    CLAUDE_API_KEY = os.getenv('CLAUDE_API_KEY')
    
    # Database
    DATABASE_URL = os.getenv('DATABASE_URL')
    
    # Security
    SECRET_KEY = os.getenv('SECRET_KEY')
    
    # Rate Limiting
    UPWORK_RATE_LIMIT = 100  # requests per hour
    AI_RATE_LIMIT = 1000     # requests per hour
```

## üöÄ –†–æ–∑–≥–æ—Ä—Ç–∞–Ω–Ω—è

### Docker Compose
```yaml
# docker-compose.yml
version: '3.8'

services:
  backend:
    build: ./backend
    ports:
      - "8000:8000"
    environment:
      - UPWORK_CLIENT_ID=${UPWORK_CLIENT_ID}
      - UPWORK_CLIENT_SECRET=${UPWORK_CLIENT_SECRET}
      - OPENAI_API_KEY=${OPENAI_API_KEY}
      - DATABASE_URL=postgresql://user:pass@db:5432/upwork_app
    depends_on:
      - db
      - redis
  
  frontend:
    build: ./frontend
    ports:
      - "3000:3000"
    environment:
      - REACT_APP_API_URL=http://localhost:8000
  
  db:
    image: postgres:13
    environment:
      - POSTGRES_DB=upwork_app
      - POSTGRES_USER=user
      - POSTGRES_PASSWORD=pass
    volumes:
      - postgres_data:/var/lib/postgresql/data
  
  redis:
    image: redis:6-alpine
    ports:
      - "6379:6379"

volumes:
  postgres_data:
```

## üìà –ú–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥ —Ç–∞ –∞–Ω–∞–ª—ñ—Ç–∏–∫–∞

### –ú–µ—Ç—Ä–∏–∫–∏ –¥–ª—è –≤—ñ–¥—Å—Ç–µ–∂–µ–Ω–Ω—è
- –ö—ñ–ª—å–∫—ñ—Å—Ç—å –≤—ñ–¥–≥—É–∫—ñ–≤ –∑–∞ –¥–µ–Ω—å/—Ç–∏–∂–¥–µ–Ω—å/–º—ñ—Å—è—Ü—å
- –í—ñ–¥—Å–æ—Ç–æ–∫ —É—Å–ø—ñ—à–Ω–∏—Ö –≤—ñ–¥–≥—É–∫—ñ–≤ (–æ—Ç—Ä–∏–º–∞–Ω–Ω—è –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ)
- –°–µ—Ä–µ–¥–Ω—ñ–π —á–∞—Å –≤—ñ–¥–≥—É–∫—É –Ω–∞ –≤–∞–∫–∞–Ω—Å—ñ—é
- –ï—Ñ–µ–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å —Ä—ñ–∑–Ω–∏—Ö AI —à–∞–±–ª–æ–Ω—ñ–≤
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä—ñ—è—Ö —Ç–∞ –±—é–¥–∂–µ—Ç–∞—Ö
- –ê–Ω–∞–ª—ñ–∑ –∫–ª—ñ—î–Ω—Ç—ñ–≤ —Ç–∞ —ó—Ö –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω–æ—Å—Ç—ñ

### –î–∞—à–±–æ—Ä–¥ –∞–Ω–∞–ª—ñ—Ç–∏–∫–∏
```python
class AnalyticsService:
    def __init__(self, db):
        self.db = db
    
    def get_daily_stats(self, date):
        """–©–æ–¥–µ–Ω–Ω–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞"""
        return {
            'total_applications': self._count_applications(date),
            'successful_applications': self._count_successful(date),
            'response_rate': self._calculate_response_rate(date),
            'average_bid_amount': self._calculate_avg_bid(date),
            'top_categories': self._get_top_categories(date),
            'ai_effectiveness': self._calculate_ai_effectiveness(date)
        }
    
    def get_performance_trends(self, days=30):
        """–¢—Ä–µ–Ω–¥–∏ –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ—Å—Ç—ñ"""
        trends = []
        for i in range(days):
            date = datetime.now() - timedelta(days=i)
            stats = self.get_daily_stats(date)
            trends.append({
                'date': date.date(),
                'stats': stats
            })
        return trends
```

## üîí –ë–µ–∑–ø–µ–∫–∞

### OAuth 2.0 –±–µ–∑–ø–µ–∫–∞
- –í–∞–ª—ñ–¥–∞—Ü—ñ—è state –ø–∞—Ä–∞–º–µ—Ç—Ä–∞
- –ë–µ–∑–ø–µ—á–Ω–µ –∑–±–µ—Ä—ñ–≥–∞–Ω–Ω—è —Ç–æ–∫–µ–Ω—ñ–≤
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è —Ç–æ–∫–µ–Ω—ñ–≤
- –û–±—Ä–æ–±–∫–∞ –ø–æ–º–∏–ª–æ–∫ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—ó

### Rate Limiting
```python
class RateLimiter:
    def __init__(self, redis_client):
        self.redis = redis_client
    
    def check_limit(self, key, limit, window):
        """–ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –ª—ñ–º—ñ—Ç—É –∑–∞–ø–∏—Ç—ñ–≤"""
        current = self.redis.get(key)
        if current and int(current) >= limit:
            return False
        
        pipe = self.redis.pipeline()
        pipe.incr(key)
        pipe.expire(key, window)
        pipe.execute()
        return True
```

## üìã –ö–æ–Ω—Ç—Ä–æ–ª—å–Ω–∏–π —Å–ø–∏—Å–æ–∫

### –ü–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º:
- [ ] –†–µ—î—Å—Ç—Ä–∞—Ü—ñ—è –Ω–∞ developers.upwork.com
- [ ] –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –¥–æ–¥–∞—Ç–∫—É —Ç–∞ –æ—Ç—Ä–∏–º–∞–Ω–Ω—è –∫–ª—é—á—ñ–≤
- [ ] –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è OAuth 2.0
- [ ] –û—Ç—Ä–∏–º–∞–Ω–Ω—è API –∫–ª—é—á—ñ–≤ –¥–ª—è AI —Å–µ—Ä–≤—ñ—Å—ñ–≤
- [ ] –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –±–∞–∑–∏ –¥–∞–Ω–∏—Ö
- [ ] –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è Docker

### –ü—Ä–∏ —Ä–æ–∑—Ä–æ–±—Ü—ñ:
- [ ] –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è OAuth –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—ó
- [ ] –í–∞–ª—ñ–¥–∞—Ü—ñ—è API –≤—ñ–¥–ø–æ–≤—ñ–¥–µ–π
- [ ] –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è AI –≥–µ–Ω–µ—Ä–∞—Ü—ñ—ó
- [ ] –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ rate limiting
- [ ] –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü—ñ—ó

### –î–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω—É:
- [ ] –ú–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è API
- [ ] –õ–æ–≥—É–≤–∞–Ω–Ω—è –ø–æ–º–∏–ª–æ–∫
- [ ] –†–µ–∑–µ—Ä–≤–Ω–µ –∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è –¥–∞–Ω–∏—Ö
- [ ] –ú–∞—Å—à—Ç–∞–±—É–≤–∞–Ω–Ω—è —Å–∏—Å—Ç–µ–º–∏
- [ ] –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è API

## üéØ –í–∏—Å–Ω–æ–≤–∫–∏

### –ü–µ—Ä–µ–≤–∞–≥–∏ –æ—Ñ—ñ—Ü—ñ–π–Ω–æ—ó —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—ó:
- ‚úÖ **–õ–µ–≥–∞–ª—å–Ω–∏–π –¥–æ—Å—Ç—É–ø** - –ø–æ–≤–Ω–∞ –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω—ñ—Å—Ç—å ToS Upwork
- ‚úÖ **–°—Ç–∞–±—ñ–ª—å–Ω–∞ —Ä–æ–±–æ—Ç–∞** - –≥–∞—Ä–∞–Ω—Ç–æ–≤–∞–Ω–∞ –¥–æ—Å—Ç—É–ø–Ω—ñ—Å—Ç—å API
- ‚úÖ **–°—Ç—Ä—É–∫—Ç—É—Ä–æ–≤–∞–Ω—ñ –¥–∞–Ω—ñ** - JSON —Ñ–æ—Ä–º–∞—Ç –≤—ñ–¥–ø–æ–≤—ñ–¥–µ–π
- ‚úÖ **–í–∏—Å–æ–∫–∞ —à–≤–∏–¥–∫—ñ—Å—Ç—å** - –æ–ø—Ç–∏–º—ñ–∑–æ–≤–∞–Ω—ñ –∑–∞–ø–∏—Ç–∏
- ‚úÖ **–ü—ñ–¥—Ç—Ä–∏–º–∫–∞** - –æ—Ñ—ñ—Ü—ñ–π–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è

### –ö–ª—é—á–æ–≤—ñ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∏:
1. **OAuth 2.0 –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—è** - –±–µ–∑–ø–µ—á–Ω–∏–π –¥–æ—Å—Ç—É–ø
2. **AI –≥–µ–Ω–µ—Ä–∞—Ü—ñ—è –≤—ñ–¥–≥—É–∫—ñ–≤** - –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü—ñ—è –ø—Ä–æ—Ü–µ—Å—É
3. **–†–æ–∑—É–º–Ω–∏–π —Ñ—ñ–ª—å—Ç—Ä –≤–∞–∫–∞–Ω—Å—ñ–π** - –µ—Ñ–µ–∫—Ç–∏–≤–Ω–∏–π –ø–æ—à—É–∫
4. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω—ñ –≤—ñ–¥–≥—É–∫–∏** - –ø–æ–≤–Ω–∞ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü—ñ—è
5. **–í–µ–¥–µ–Ω–Ω—è –ø–µ—Ä–µ–ø–∏—Å–∫–∏** - –∫–æ–º—É–Ω—ñ–∫–∞—Ü—ñ—è –∑ –∫–ª—ñ—î–Ω—Ç–∞–º–∏
6. **–ê–Ω–∞–ª—ñ—Ç–∏–∫–∞ –µ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—ñ** - –æ–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—è —Å—Ç—Ä–∞—Ç–µ–≥—ñ—ó

### –ù–∞—Å—Ç—É–ø–Ω—ñ –∫—Ä–æ–∫–∏:
1. **–†–µ—î—Å—Ç—Ä–∞—Ü—ñ—è –Ω–∞ developers.upwork.com**
2. **–ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è OAuth 2.0**
3. **–°—Ç–≤–æ—Ä–µ–Ω–Ω—è UpworkAPIClient**
4. **–Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è –∑ AI —Å–µ—Ä–≤—ñ—Å–∞–º–∏**
5. **–†–æ–∑—Ä–æ–±–∫–∞ –≤–µ–±-—ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å—É**
6. **–¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è —Ç–∞ –æ–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—è**

---
*–î–∞—Ç–∞: 2024-12-19* 